# READ ME

### Project Overview

This project provides a basic exploratory analysis of poverty and inequality statistics in the United States. Using Census 5-year data for 2018 and 2012, this analysis compares top-level poverty estimates for all U.S. counties and identifies U.S. counties with the highest percentage of residents living under the national poverty threshold. The analysis also compares changes in county-level poverty estimates between 2012 and 2018 and identifies counties that experienced the largest percentage increases and decreases in poverty rates. In particular, because rates of change in poverty can differ based on population size, this analysis also segments analysis of poverty changes by county population size. A rudimentary relational analysis of changes in population size and poverty rates is also provided.

To round out the national comparative analyses, county-level Gini coefficients are employed to compare local-level inequality conditions in 2018. The second component of this project creates a Python script template that can be applied to explore local level demographic characteristics that are often correlated with poverty and inequality outcomes. This analysis does not constitute a relational analysis of demographic characteristics as predictors of poverty outcomes; instead, it offers a basic spatial comparison of demographic characteristics of the country’s highest-poverty communities. These analyses are akin to a broad overview of demographic experiences that could inform the development of more robust research questions. Further, these scripts could be modified to compare local-level demographic changes to changes in poverty rates, which could also inform the development of more sophisticated research projects.


### Data Sources and File Conventions

All project data was gathered from the Census Bureau’s American Community Survey 5-year data estimates, and the analysis relied on data for two survey time periods—2018 estimates (the most recent year data is available) were pulled from the ACS 5-year 2014-2018 annual survey, and 2012 estimates were pulled from the ACS 5-year survey for 2008-2012. Using multi-year estimates in lieu of single-year data allows researchers to combine data collected over a larger period of time, which increases the sample size and statistical reliability of data for small population subgroups. As a result, although 5-year data provides a less precise point in time estimate than 1-year data, the increased data pool allows researchers to compare data on smaller geographic subgroups—like census tracts—with statistical reliability.

The project’s data management file convention relies on a two-stage Python script design to complete the data pull and clean and analyze the appropriate data for each major research question. The first script type, “collect” files, completes the Census API data pull requests for the data of interest at the appropriate geographic level of analysis. These scripts convert Census data requests to CSV dataframes, which are read into the “analyze” Python script files to execute the appropriate data cleaning and exploratory analysis. The resulting dataframes are then exported to “variable-map” CSV files, which are imported into the QGIS software program, joined to the appropriate geographic-level Census Tigerline shapefile, and subjected to layer styling data edits that provide a cleaner spatial visualization of the findings. Finally, the visualizations are added to a Map Layout Editor, where relevant details are added, and the final maps are exported as PNGs.

Some analyses combine data from 2012 and 2018 to compute changes in statistical poverty data over time. The “analyze” Python script files for time-comparisons combine multi-year data using a merge command, and the analysis of the resulting dataframe focuses on computing differences across time. Finally, county-level poverty and inequality data is used to identify the counties with the highest percentage of residents living in poverty and the counties with the largest increases and decreases in poverty rates between 2012 and 2018. For each question, the analyze files generate lists of the top 3-10 counties that meet this criteria, and these lists are used to identify counties of special interest. The county-specific Python files pull, clean, and analyze demographic variables of interest at the census tract-level, and analysts can use the resulting “top” and “bottom” lists to identify counties to run through the county-specific files. The resulting data and analysis is exported as a variable-map CSV file, which is read into QGIS, joined to the appropriate Census Tigerline shapefile, and edited to create relevant visual comparisons of economic and demographic variables.

The repository data structure organizes the files in the following folders:
  1. Root: All python collect and analyze files are stored in the root directory. The README and Summary of Findings files are also located here.
  2. Variables: CSV Lists of Census variables used for the API requests.
  3. Census: CSV exports of completed Census API requests.
  4. Lists: CSV files of poverty lists generated from analyze scripts.
  5. Mapfile: CSV files of prepared data, to be joined to Shapefiles in QGIS workbooks.
  6. QGIS: QGIS workbooks that combine Mapfiles and Shapefiles are located here.
  7. Shapefiles: ZIPs of US, State, and County Tigerline Shapefiles downloaded from the Census Bureau.
  8. Visualizations: PNGs of all map visualizations from QGIS and plots saved from analyze scripts.


### Detailed Script Overview (by run order)

1. Povstat files: Gather, clean, and analyze U.S. county-level poverty rates, defined as the total population for while “Income in the past 12 months [was] below poverty level”.
  + “collect-povstat.py”: Uses a Census API data request (using a CSV file that indicates variables of interest) to pull the following variables for every county in every state: total population (B01003_001E), total population in poverty level universe (B17001_001E), and estimated total of number of individuals whose income fell below the poverty level in the last year (B17001_002E). Converts and exports to CSV file.
  + “analyze-povstat.py”: Calculates the percent of population whose prior year income fell below the poverty level (dividing by the total population in the poverty universe). Identifies the top 10 counties with the highest poverty rates and saves the list as a separate CSV dataframe, “povtop10.csv”. Creates a geoid variable to use for Shapefile join. Converts and exports to “povstat-map” CSV file.
  + “povstat-map.qgs”, “povstat-map.csv”, and “tl_2019_us_county.zip”: Joins the CSV data to the Shapefile and uses graduated layer styling and the layout template tool to create “povstat-map-distribution.png”. The visualization shows counties’ poverty rates as standard deviation measures relative to the average county poverty rate.
  +	Special notes: In order to get the QGIS program to recognize the geoid in the correct format, the CSV “geoid” column was edited in Excel using the function “=Text(REF, “00000”)”, and the resulting text format manually overwrote the previous format. Additionally, a row of null values was added to help QGIS recognize the appropriate field type for each variable. This was completed for every “map” CSV file prior to QGIS import.
  + “povstat-12” files use the same methods indicated above t0 complete the Census API request for 2012 data and compute county poverty percentages.

2. Povstat-12-18 files: Uses calculations of 2012 and 2018 poverty rates to calculate the change in poverty rate by county over time.
  + “analyze-povstat-12-18.py”: Merges 2012 and 2018 poverty data by county name and calculates the basic percentage point change (difference) in poverty rates between 2012 and 2018. Identifies the top 10 counties with the largest increases and decreases in poverty. Uses histograms and scatterplots to explore the difference in county populations and the correlation between changes in population and changes in poverty. Segments counties by county population size (in 2018 using ocular analysis of population histogram to identify population breaks) and identifies the top 3 counties by percentage point increases and decreases in poverty by cumulative county population limits. Converts and exports data to “map” CSV file.
  + “povstat1218-map.qgs”, “povstat-12-18-map.csv”, “tl_2019_us_county.zip” (“tl_2019_us_state.zip” used to add state barrier lines): Joins the CSV data to the Shapefile and uses graduated layer styling and the layout template tool to create “povstat1218-map.png”. The visualization shows counties’ percentage point changes in poverty rates using pretty breaks around 0-percent change to visualize poverty increase and decrease trends.

3.	Gini files: Uses county-level Gini coefficients to visualize national variation in local-level inequality estimates
  + “collect-gini.py”: Uses a Census API data request (using a CSV file that indicates variables of interest) to pull the following variables for every county in every state: Gini Index (B19083_001E), Quintile Share of Aggregate Income (B19082_001E- B19082_005E), and income share percent of top 5% (B19082_006E). Converts and exports to CSV file.
  +	“analyze-gini.py”: Identifies the top 10 counties with the highest Gini coefficients. Creates a geoid variable to use for Shapefile join. Converts and exports to “povstat-map” CSV file.
  +	“gini-map_sd.qgs”, “gini-map.csv”, and “tl_2019_us_county.zip”: Joins the CSV data to the Shapefile and uses graduated layer styling and the layout template tool to create “gini-map-distribution.png”. The visualization shows counties’ Gini coefficient values as standard deviation measures relative to the national Gini average (0.486). Creating breaks at 2.00 standard deviation highlights counties with Gini coefficients that are likely statistically significantly higher or lower than the national average (at a ~95% confidence interval).

4.	County and Povtop10 files: Uses list of counties with the highest poverty rates to pull county-specific demographic values by Census tract. As designed, these files create a template that can quickly pull data for each county to analyze and visualize county demographic variables of interest. This repository limits data outputs to only the #1 highest poverty county.
  +	“collect-povtop10-county.py”: Uses a Census API data request (using a CSV file that indicates variables of interest) to pull the following variables for every census tract in the highest poverty counties: total population, aggregate income, median income, quintile shares of aggregate income, detailed income-poverty patio distributions, home ownership, employment, total household income, nativity, race, and Hispanic identity. (Census limits API variable requests to 50, but if space allowed, additional variables would include household income distributions and educational attainment.
  + "analyze-povtop10-county": Run individually for each county in the list, this script cleans data by grouping and renaming variable information. Computes and prints key demographic data by census tract. Creates basic visualizations of distributional data on income and poverty data. Creates a geoid variable to use for Shapefile join. Converts and exports to "povtop10-#-map" CSV file.
  + "povtop10-variable.qgs", "povtop10-#-map.csv", and “tl_2019_##_tract.zip”: Joins the CSV data to the Shapefile and uses graduated layer styling and the layout template tool to create visualizations of the county's poverty, income, and race attributes by census tract. Visualizations are exported as PNG files by county.

5.	Other files: Multiple Census variable CSV files have been generated for use by specific scripts' API requests. “census-variables-all.csv” contains lists of Census variables of interest that can be modified and included in future demographic data requests. Census variable data was identified on the Census API detail site for the 2018 ACS 5-year survey: https://api.census.gov/data/2018/acs/acs5/variables.html.
